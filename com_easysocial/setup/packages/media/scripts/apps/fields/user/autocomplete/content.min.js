EasySocial.module("apps/fields/user/autocomplete/content",function(){var b=this;EasySocial.require().library("textboxlist").done(function(a){EasySocial.Controller("Field.Autocomplete",{defaultOptions:{required:!1,id:null,types:null,fieldname:null,actor:null,target:null,selectedItems:[],max:null,exclusive:!0,exclusion:[],minLength:1,highlight:!0,name:"uid[]",type:"","{field}":"[data-field-autocomplete]","{suggest}":"[data-field-suggest]","{input}":"[data-textboxlist-item]"}},function(b,c){return{init:function(){c.name=c.fieldname+"[]",b.initSuggest();var a=b.field().htmlData();c.error=a.error},initSuggest:function(){b.suggest().textboxlist({component:"es",name:c.name,max:c.max,plugin:{autocomplete:{exclusive:c.exclusive,minLength:c.minLength,highlight:c.highlight,showLoadingHint:!0,showEmptyHint:!0,emptyMessage:c.emptyMessage,query:function(a){var b=EasySocial.ajax("fields/user/autocomplete/suggest",{search:a,id:c.id});return b}}}}).textboxlist("enable")},"{suggest} removeItem":function(b,d,e){var f=a.inArray(e.id.toString(),c.exclusion)>-1;f&&c.exclusion.splice(c.exclusion.indexOf(e.id.toString()),1)},"{suggest} filterMenu":function(b,d,e,f,g,h){var i=h.getAddedItems(),i=a.pluck(i,"id"),j=i.concat(c.exclusion),k=[];a.each(j,function(a,b){k.push(b.toString())}),f.each(function(){var b=a(this),c=b.data("item"),d=a.inArray(c.id.toString(),k)>-1;b.toggleClass("hidden",d)})},validateInput:function(){b.clearError();var d=b.input().data("title");return b.options.required&&a.isEmpty(d)?(b.raiseError(c.error.required),!1):!0},clearError:function(){b.trigger("clear")},raiseError:function(a){b.trigger("error",[a])},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})});