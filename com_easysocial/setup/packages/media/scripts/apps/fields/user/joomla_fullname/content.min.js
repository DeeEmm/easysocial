EasySocial.module("apps/fields/user/joomla_fullname/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_fullname",{defaultOptions:{nameFormat:1,max:0,required:!0,"{field}":"[data-field-joomla_fullname]","{firstName}":"[data-field-jname-first]","{middleName}":"[data-field-jname-middle]","{lastName}":"[data-field-jname-last]","{name}":"[data-field-jname-name]"}},function(b,c){return{validated:{first:!1,middle:!1,last:!1,name:!1},init:function(){c.nameFormat=b.field().data("name-format"),c.max=b.field().data("max");var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},checkAllowedName:function(d,e){var f=a.Deferred(),g=d.val();return EasySocial.ajax("fields/user/joomla_fullname/isAllowed",{id:c.id,userId:c.userId,type:e,name:g}).done(function(){b.validated[e]=!0,b.canClearError()&&b.clearError(),f.resolve()}).fail(function(a){b.validated[e]=!1,b.raiseError(a),f.reject()}),f},delayedCheck:a.debounce(function(a,c){b.checkAllowedName(a,c)},250),"{firstName} blur":function(a){var c=b.validateInput();c&&b.delayedCheck(a,"first")},"{middleName} blur":function(a){b.delayedCheck(a,"middle")},"{lastName} blur":function(a){b.delayedCheck(a,"last")},"{name} blur":function(a){var d=b.validateInput();d&&b.delayedCheck(a,"name")},canClearError:function(){if(!c.registerMini){if(1==c.nameFormat||2==c.nameFormat)return b.validated.first&&b.validated.middle&&b.validated.last;if(3==c.nameFormat)return b.validated.name;if(4==c.nameFormat||5==c.nameFormat)return b.validated.first&&b.validated.last}if(c.registerMini){if(5!=c.nameFormat){if(3==c.nameFormat)return b.validated.name;if(3!=c.nameFormat)return b.validated.first&&b.validated.last}if(5==c.nameFormat)return b.validated.first&&b.validated.last}},validateInput:function(){return c.required?3==c.nameFormat?a.isEmpty(b.name().val())?(b.raiseError(c.error.empty),!1):!0:a.isEmpty(b.firstName().val())?(b.raiseError(c.error.empty),!1):!0:!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onError":function(){b.raiseError()},"{self} onSubmit":function(a,c,d){b.clearError(),d.push(b.validateInput())}}}),b.resolve()});