EasySocial.module("apps/fields/user/joomla_email/registermini_content",function(a){var b=this;EasySocial.Controller("Field.Joomla_email.Mini",{defaultOptions:{require:!0,id:null,"{field}":"[data-field-joomla_email]","{input}":"#email","{confirm}":"[data-field-email-reconfirm-input]"}},function(b,c){return{init:function(){b.origEmail=b.input().val();var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} keyup":function(a){a.val().length>0&&b.delayedCheck()},"{confirm} blur":function(){b.checkEmail()},state:!1,delayedCheck:a.debounce(function(){b.checkEmail()},250),checkEmail:function(){b.clearError();var d=b.input().val();if(b.options.required&&0==d.length)return b.raiseError(c.error.required),!1;if(!a.isEmpty(d)&&b.options.regex){var e=new RegExp(b.options.regexFormat,b.options.regexModifier);if(!e.test(d))return b.raiseError(c.error.format),!1}if(c.reconfirm){var f=b.confirm().val();if(d!==b.origEmail&&a.isEmpty(f))return b.raiseError(c.error.reconfirmrequired),!1;if(!a.isEmpty(f)&&d!==f)return b.raiseError(c.error.mismatch),!1}if(d.length>0){var g=a.Deferred();b.input().addClass("is-loading");var d=b.input().val();return EasySocial.ajax("fields/user/joomla_email/isValid",{id:b.options.id,userid:0,email:d}).done(function(){g.resolve()}).fail(function(a){b.raiseError(a),g.reject()}).always(function(){b.input().removeClass("is-loading")}),g}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&(b.options.required||b.input().val().length>0)&&d.push(b.checkEmail())},setLoaded:function(){b.trigger("loaded")}}}),b.resolve()});