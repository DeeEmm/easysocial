EasySocial.module("apps/fields/user/country/content",function(a){var b=this;EasySocial.require().library("textboxlist").done(function(){EasySocial.Controller("Field.Country",{defaultOptions:{fieldname:"",required:!1,id:null,min:null,max:null,selecttype:"textboxlist","{field}":"[data-field-country]","{inputTextboxlist}":"[data-country-select-textboxlist]","{inputMultilist}":"[data-country-select-multilist]","{inputCheckbox}":"[data-country-select-checkbox]","{inputCheckboxes}":"[data-country-select-checkbox] input","{inputDropdown}":"[data-country-select-dropdown]"}},function(b,c){return{init:function(){c.max=b.field().data("max"),c.min=b.field().data("min"),c.selecttype=b.field().data("select-type"),"textboxlist"===c.selecttype&&EasySocial.module("field.country/"+b.options.id).done(function(a){b.inputTextboxlist().textboxlist({component:"es",name:b.options.fieldname+"[]",max:b.options.max<1?null:b.options.max,plugin:{autocomplete:{exclusive:!0,query:a}}})});var a=b.field().htmlData();c.error=a.error},"{inputMultilist} change":function(a){return b.options.max>0&&a.val().length>b.options.max?(a.val(b.lastValidSelection?b.lastValidSelection:""),!1):(b.lastValidSelection=a.val(),b.validateInput(),void 0)},"{inputCheckboxes} change":function(a){var d=b.inputCheckboxes(":checked").length;return b.options.max>0&&d>b.options.max?(a.removeAttr("checked"),!1):(b.validateInput(),void 0)},"{inputDropdown} change":function(){b.validateInput()},"{inputTextboxlist} listChange":function(){console.log("list changed"),b.validateInput()},validateInput:function(){b.clearError();var d=null;if("textboxlist"===b.options.selecttype&&(d=b.inputTextboxlist().controller("textboxlist").getAddedItems()),"multilist"===b.options.selecttype&&(d=b.inputMultilist().val()),"checkbox"===b.options.selecttype&&(d=b.inputCheckboxes(":checked")),"dropdown"===b.options.selecttype){var e=b.inputDropdown().val();a.isEmpty(e)||(d=[e])}var f=d?d.length:0;return b.options.required||0!==f?b.options.required&&1>f?(b.raiseError(c.error.required),!1):b.options.min>0&&f<b.options.min?(b.raiseError(c.error.min),!1):b.options.max>0&&f>b.options.max?(b.raiseError(c.error.max),!1):!0:!0},clearError:function(){b.trigger("clear")},raiseError:function(a){b.trigger("error",[a])},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())}}}),b.resolve()})});