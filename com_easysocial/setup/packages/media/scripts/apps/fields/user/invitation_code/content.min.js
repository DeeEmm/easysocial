EasySocial.module("apps/fields/user/invitation_code/content",function(a){var b=this;EasySocial.Controller("Field.Invitation_code",{defaultOptions:{id:null,userid:null,"{button}":"[data-invitecode-check]","{input}":"[data-invitecode-input]","{available}":"[data-invitecode-available]","{error}":"[data-invitecode-error]","{errorMessage}":"[data-invitecode-error] > [data-message]"}},function(b,c){return{state:!1,init:function(){},"{button} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkInviteCode()},250),checkInviteCode:function(){b.clearError();var d=a.Deferred(),e=b.button();e.addClass("is-loading");var f=b.input().val();return EasySocial.ajax("fields/user/invitation_code/isValid",{id:c.id,code:f}).done(function(){b.available().removeClass("t-hidden"),b.error().addClass("t-hidden"),d.resolve()}).fail(function(a){b.available().addClass("t-hidden"),b.error().removeClass("t-hidden"),b.errorMessage().html(a),b.raiseError(a),d.reject()}).always(function(){e.removeClass("is-loading")}),d},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d){d.push(b.checkInviteCode())}}}),b.resolve()});