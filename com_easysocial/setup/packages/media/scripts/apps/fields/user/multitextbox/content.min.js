EasySocial.module("apps/fields/user/multitextbox/content",function(a){var b=this;EasySocial.require().library("ui/sortable").done(function(){EasySocial.Controller("Field.Multitextbox",{defaultOptions:{required:!1,id:null,inputName:"",max:0,"{field}":"[data-field-multitextbox]","{list}":"[data-field-multitextbox-list]","{item}":"[data-field-multitextbox-item]","{input}":"[data-field-multitextbox-input]","{add}":"[data-field-multitextbox-add]","{delete}":"[data-field-multitextbox-delete]","{move}":"[data-field-multitextbox-move]"}},function(b,c){return{init:function(){b.initData(),b.validateInput()},initData:function(){var a=b.field().htmlData();c.error=a.error||{},c.max=b.field().data("max"),b.initSortable()},"{self} onRender":function(){b.initData()},validateInput:function(){if(b.clearError(),!b.options.required)return!0;var c=!1;return a.each(b.input(),function(b,d){return a.isEmpty(a(d).val())?void 0:(c=!0,!0)}),c||b.raiseError(),c},initSortable:function(){b.list().sortable({items:b.item.selector,handle:b.move.selector})},"{add} click":function(a){if(b.options.max<1||b.item().length<b.options.max){var c=b.item().eq(0).clone();c.find(b.input.selector).attr("value","").val(""),b.list().append(c)}b.options.max>0&&b.item().length>=b.options.max&&a.hide()},"{delete} click":function(a){var c=a.parents(b.item.selector);b.item().length>1?c.remove():c.find(b.input.selector).val(""),b.options.max>0&&b.item().length<b.options.max&&b.add().show()},"{self} onConfigChange":function(a,c,d,e){switch(d){case"add_button_text":b.add().text(e)}},raiseError:function(){b.trigger("error",[c.error.required])},"{self} onSubmit":function(a,c,d){d.push(b.validateInput())},clearError:function(){b.trigger("clear")}}}),b.resolve()})});