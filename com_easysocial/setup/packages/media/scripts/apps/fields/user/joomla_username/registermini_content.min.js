EasySocial.module("apps/fields/user/joomla_username/registermini_content",function(a){var b=this;EasySocial.Controller("Field.Joomla_username.Mini",{defaultOptions:{id:null,required:!1,"{field}":"[data-field-joomla_username]","{input}":"#joomla_username"}},function(b,c){return{init:function(){var a=b.field().htmlData();c.error=a.error||{}},"{self} onRender":function(){var a=b.field().htmlData();c.error=a.error||{}},"{input} keyup":function(a){a.val().length>0&&b.delayedCheck()},state:!1,delayedCheck:a.debounce(function(){b.checkUsername()},250),checkUsername:function(){var d=b.input().val();if(b.options.required&&0==d.length)return b.raiseError(c.error.empty),!1;if(d.length>0){var e=a.Deferred();return b.clearError(),b.input().addClass("is-loading"),EasySocial.ajax("fields/user/joomla_username/isValid",{id:b.options.id,userid:0,username:d}).done(function(){b.setLoaded(),e.resolve()}).fail(function(a){b.raiseError(a),e.reject()}).always(function(){b.input().removeClass("is-loading")}),e}return!0},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"===e&&(b.options.required||b.input().val().length>0)&&d.push(b.checkUsername())},setLoading:function(a){b.trigger("loading",[a])},setLoaded:function(){b.trigger("loaded")}}}),b.resolve()});