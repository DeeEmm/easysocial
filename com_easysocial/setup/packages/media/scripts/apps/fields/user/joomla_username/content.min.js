EasySocial.module("apps/fields/user/joomla_username/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_username",{defaultOptions:{event:null,id:null,userid:null,"{button}":"[data-username-check]","{input}":"[data-username-input]","{available}":"[data-username-available]","{error}":"[data-username-error]","{errorMessage}":"[data-username-error] > [data-message]"}},function(b,c){return{state:!1,init:function(){},"{button} click":function(){b.delayedCheck()},"{input} keyup":function(){b.delayedCheck()},delayedCheck:a.debounce(function(){b.checkUsername()},250),checkUsername:function(){b.clearError();var d=a.Deferred(),e=b.button();e.addClass("is-loading");var f=b.input().val();return EasySocial.ajax("fields/user/joomla_username/isValid",{id:c.id,userid:c.userid,username:f,event:c.event}).done(function(){b.available().removeClass("t-hidden"),b.error().addClass("t-hidden"),d.resolve()}).fail(function(a){b.available().addClass("t-hidden"),b.error().removeClass("t-hidden"),b.errorMessage().html(a),b.raiseError(a),d.reject()}).always(function(){e.removeClass("is-loading")}),d},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.checkUsername())}}}),b.resolve()});