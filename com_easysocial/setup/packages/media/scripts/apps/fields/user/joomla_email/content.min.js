EasySocial.module("apps/fields/user/joomla_email/content",function(a){var b=this;EasySocial.Controller("Field.Joomla_email",{defaultOptions:{required:!0,id:null,userid:null,reconfirm:!1,event:null,registration:null,"{field}":"[data-field-joomla_email]","{input}":"[data-field-email-input]","{confirm}":"[data-field-email-reconfirm-input]","{confirmFrame}":"[data-field-email-reconfirm-frame]"}},function(b,c){return{init:function(){b.origEmail=b.input().val(),value=b.input().val(),c.reconfirm&&!c.registration&&value&&b.confirmFrame().hide()},dataInitialized:!1,initData:function(){if(!b.dataInitialized){var a=b.field().htmlData();c.error=a.error||{},b.dataInitialized=!0}},"{self} onRender":function(){b.initData()},"{input} blur":function(){var e=b.input().val();c.reconfirm&&e!==b.origEmail&&b.confirmFrame().show(),!c.reconfirm||e!==b.origEmail||"onEdit"!==c.event&&"onAdminEdit"!==c.event||b.confirmFrame().hide(),b.validateInput()},"{confirm} blur":function(){b.validateInput()},validateInput:function(){b.initData(),b.clearError();var d=b.input().val();if(a.isEmpty(d))return b.options.required?(b.raiseError(c.error.required),!1):!0;if(b.options.reconfirm){var e=b.confirm().val();if(d!==b.origEmail&&a.isEmpty(e))return b.raiseError(c.error.reconfirmrequired),!1;if(!a.isEmpty(e)&&d!==e)return b.raiseError(c.error.mismatch),!1}return b.checkInput().done(function(){b.clearError()}).fail(function(a){b.raiseError(a)})},checkInput:function(){return EasySocial.ajax("fields/user/joomla_email/isValid",{id:b.options.id,userid:b.options.userid,email:b.input().val()})},raiseError:function(a){b.trigger("error",[a])},clearError:function(){b.trigger("clear")},"{self} onSubmit":function(a,c,d,e){"onRegisterMini"!==e&&d.push(b.validateInput())}}}),b.resolve()});