EasySocial.module("shared/fields/validate",function(a){var b=this,c=a.isController("EasySocial.Controller.Validator");c||(EasySocial.Controller("Validator",{defaultOptions:{mode:null,checks:["required","validate"],typeAttr:"data-check-type",formatAttr:"data-check-format",modifierAttr:"data-check-modifier",errorTrigger:"onError",submitTrigger:"onSubmit",fieldSelector:"","{container}":"[data-check]","{notice}":"[data-check-notice]","{required}":"[data-check-required]","{validate}":"[data-check-validate]"}},function(b,c){return{vars:{},parents:{},register:[],deferreds:[],errors:[],state:a.Deferred(),init:function(){},reset:function(){b.vars={},b.parents={},b.register=[],b.deferreds=[],b.errors=[],b.state=a.Deferred(),b.container().removeClass("error")},start:function(){return b.reset(),a.each(b.container(),function(d,e){return b.vars.container=e=a(e),b.parents.container=b.vars.container.parents(c.fieldSelector),"1"==b.parents.container.data("isconditional")&&b.parents.container.hasClass("t-hidden")?!0:(e.trigger(b.options.submitTrigger,[b.register,b.options.mode]),a.each(b.getFields(),function(c,d){b.vars.field=d=a(d),a.each(b.options.checks,function(a,c){b.vars.check=c,b[c+"Check"]()})}),void 0)}),a.each(b.register,function(c,d){if(a.isDeferred(d))b.deferreds.push(d);else if(a.isPlainObject(d))a.each(d,function(a,d){return d===!1?(b.errors.push(c),!0):void 0});else if(d===!1)return b.errors.push(c),!0}),b.errors.length>0?b.state.reject():b.deferreds.length>0?a.when.apply(null,b.deferreds).done(function(){b.state.resolve()}).fail(function(){b.state.reject()}):b.state.resolve(),b.state},getFields:function(){return a.merge(b.vars.container.find(b.required.selector),b.vars.container.find(b.validate.selector))},requiredCheck:function(){if(b.vars.field.is(b.required.selector)){var c=b.vars.field.attr(b.options.typeAttr)||b.vars.field.attr("type")||"text";"text"===c&&""==a.trim(b.vars.field.val())&&b.raiseError(),"checkbox"===c&&b.vars.field.find('input[type="checkbox"]').filter(":checked").length<1&&b.raiseError()}},validateCheck:function(){if(void 0!==b.vars.field.attr(b.options.formatAttr)){var c=b.vars.field.val();if(a.isEmpty(c))return;var d=b.vars.field.attr(b.options.formatAttr)||"",e=b.vars.field.attr(b.options.modifierAttr)||"",f=new RegExp(d,e);f.test(c)||b.raiseError()}},raiseError:function(){b.vars.container.addClass("has-error"),b.vars.container.trigger(b.options.errorTrigger,[b.vars.check,b.vars.field]),b.register.push(!1)}}}),a.fn.validate=function(a){var b=this;if(b.length>0){var c=this.addController("EasySocial.Controller.Validator",a);return c.start()}return!1},b.resolve())});