EasySocial.module("shared/uploader.item",function(a){var b=this;EasySocial.Controller("Albums.Uploader.Item",{defaultOptions:{"{status}":".upload-status","{filename}":".upload-filename","{progressBar}":".upload-progress-bar","{percentage}":".upload-percentage","{filesizeTotal}":".upload-filesize-total","{filesizeLeft}":".upload-filesize-left","{details}":".upload-details","{detailsButton}":"[data-upload-failed-link]","{removeButton}":".upload-remove-button","{message}":".upload-message"}},function(b,c){return{init:function(){b.id=b.element.attr("id");var c=b.file();b.filename().text(c.name),b.setState("pending"),b.setProgress();var d="html4"==b.uploader.plupload.runtime;(a.IE<10||d)&&b.element.addClass("indefinite-progress"),d&&b.element.addClass("no-filesize")},file:function(){var c=b.uploader.plupload.getFile(b.id)||b.options.file;if(c){var d=void 0===c.size||"N/A"==c.size;c.percentage=c.percent+"%",c.filesize=d?"":a.plupload.formatSize(c.size),c.remaining=d?"":a.plupload.formatSize(c.size-(c.loaded||0))}return c},setProgress:function(){var a=b.file(),c=a.percentage;"100%"==c&&(c="99%"),"0%"==c&&(c="1%"),b.progressBar().width(c),b.percentage().html(c),b.filesizeTotal().html(a.filesize),b.filesizeLeft().html(a.remaining)},setState:function(a){b.element.removeClass("pending preparing uploading failed done").addClass(a),b.state=a},setMessage:function(a){c.errorMessage=a},"{detailsButton} click":function(){c.errorMessage&&EasySocial.dialog({content:c.errorMessage})},"{removeButton} click":function(){b.uploader.removeItem(b.id)}}}),b.resolve()});