EasySocial.module("shared/sidebarmenu",function(a){var b=this,c=a.isController("EasySocial.Controller.Sidebarmenu");c||(EasySocial.Controller("Sidebarmenu",{defaultOptions:{mainmenu:null,viewOpenClass:"dl-subviewopen",subViewClass:"dl-subview",animate:!0,"{subMenuLink}":"[data-submenu-link]","{subMenuBack}":"[data-submenu-back]"}},function(b,c,d){return{init:function(){},open:function(a){var e=a.parent("li"),f=e.children("ul");b.animate("open",f).done(function(){d.find(".dl-subviewopen").addClass(c.subViewClass).removeClass(c.viewOpenClass),e.removeClass(c.subViewClass).addClass(c.viewOpenClass)})},close:function(a){var d=a.parent("li");d.removeClass(c.viewOpenClass);var e=d.parent("ul");e.parent("li").removeClass(c.subViewClass).addClass(c.viewOpenClass),b.animate("close",a,e).done(function(){void 0!==e.attr("data-sidebar-menu")&&e.removeClass(c.subViewClass)})},animate:function(b,e,f){if(void 0!==f&&void 0!==f.attr("data-sidebar-menu")&&d.removeClass(c.subViewClass),c.animate){var g=a.Deferred(),h=a.Deferred();operation1="open"==b?"out":"in",operation2="open"==b?"in":"out";var i=e.clone();return i.find("ul").remove(),d.after(i),d.addClass("dl-animate-"+operation1+"-1"),setTimeout(function(){d.addClass(c.subViewClass).removeClass("dl-animate-"+operation1+"-1"),g.resolve()},300),i.addClass("dl-animate-"+operation2+"-1"),"in"==operation2&&i.css("opacity","0"),setTimeout(function(){i.removeClass("dl-animate-"+operation2+"-1"),i.remove(),h.resolve()},300),a.when(g,h).done(function(){}).promise()}var j=a.Deferred();return d.addClass(c.subViewClass),j.resolve(),j},"{subMenuLink} click":function(a,c){c.preventDefault(),c.stopPropagation(),b.open(a)},"{subMenuBack} click":function(a,c){c.preventDefault(),c.stopPropagation();var d=a.parent("ul");b.close(d)}}}),b.resolve())});