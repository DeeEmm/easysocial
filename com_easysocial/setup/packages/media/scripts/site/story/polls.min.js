EasySocial.module("site/story/polls",function(){var b=this;EasySocial.Controller("Story.Polls",{defaultOptions:{tmpForm:null,"{storyForm}":"[data-story-polls-form]","{polls}":"[data-polls-form]"}},function(a,b){return{init:function(){b.tmpForm=a.storyForm().clone().html()},"{story} save":function(b,c,d){if("polls"==d.currentPanel){var e=a.polls().controller("EasySocial.Controller.Polls.Form");a.options.name="polls";var f=d.addTask("validatePollsForm");a.save(f,e)}},save:function(c,d){var e=d.validateForm();if(!e)return c.reject(b.error);var f=d.toData();c.save.addData(a,f),c.resolve()},"{story} clear":function(){a.storyForm().html(b.tmpForm);var f=a.storyForm().find("[data-polls-form]"),g=f.addController("EasySocial.Controller.Polls.Form");g.init()}}}),b.resolve()});